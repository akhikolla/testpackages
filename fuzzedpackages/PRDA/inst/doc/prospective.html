<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Prospective Design Analysis</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Prospective Design Analysis</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(PRDA)</span></code></pre></div>
<p>Given the hypothetical population effect size and the required power level, the function <code>prospective()</code> performs a prospective design analysis. Prospective design analysis allows to define the sample size needed to obtain a required level of power computing also the associated inferential risks. Function arguments are:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">retrospective</span>(effect_size, power, <span class="dt">ratio_n =</span> <span class="dv">1</span>,</span>
<span id="cb2-2"><a href="#cb2-2"></a>              <span class="dt">test_method =</span> <span class="kw">c</span>(<span class="st">&quot;pearson&quot;</span>, <span class="st">&quot;two_sample&quot;</span>, <span class="st">&quot;welch&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>                                        <span class="st">&quot;paired&quot;</span>, <span class="st">&quot;one_sample&quot;</span>),</span>
<span id="cb2-4"><a href="#cb2-4"></a>              <span class="dt">alternative =</span> <span class="kw">c</span>(<span class="st">&quot;two_sided&quot;</span>,<span class="st">&quot;less&quot;</span>,<span class="st">&quot;greater&quot;</span>),</span>
<span id="cb2-5"><a href="#cb2-5"></a>              <span class="dt">sig_level =</span> <span class="fl">.05</span>, <span class="dt">ratio_sd =</span> <span class="dv">1</span>, <span class="dt">B =</span> <span class="fl">1e4</span>,</span>
<span id="cb2-6"><a href="#cb2-6"></a>              <span class="dt">tl =</span> <span class="op">-</span><span class="ot">Inf</span>, <span class="dt">tu =</span> <span class="ot">Inf</span>, <span class="dt">B_effect =</span> <span class="fl">1e3</span>,</span>
<span id="cb2-7"><a href="#cb2-7"></a>              <span class="dt">sample_range =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1000</span>), <span class="dt">tol =</span> <span class="fl">.01</span>,</span>
<span id="cb2-8"><a href="#cb2-8"></a>              <span class="dt">display_message =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Complete arguments description is provided in the function documentation <code>?prospective</code>. In the following sections, instead, different examples are presented. For further details about design analysis see <span class="citation">Altoè et al. (2020)</span> and <span class="citation">Bertoldo, Zandonella Callegher, and Altoè (2020)</span>.</p>
<div id="prospective-design-analysis-for-correlation" class="section level2">
<h2>Prospective Design Analysis for Correlation</h2>
<p>To conduct a prospective design analysis considering a correlation between two variables, we need to specify <code>test_method = &quot;pearson&quot;</code> (default option). Note that, only Pearson’s correlation is available, while the Kendall’s <span class="math inline">\(\tau\)</span> and Spearman’s <span class="math inline">\(\rho\)</span> are not implemented.</p>
<div id="example-1-pearsons-correlation" class="section level3">
<h3>Example 1: Pearson’s correlation</h3>
<p>Consider a study that will evaluate the correlation between two variables. Knowing from the literature that we expect an effect size of <span class="math inline">\(\rho = .25\)</span>, which is the required sample size to obtain a power of 60%? We can use the function <code>prospective()</code> setting the argument <code>test_method = &quot;pearson&quot;</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">set.seed</span>(<span class="dv">2020</span>) <span class="co"># set seed to make results reproducible</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">prospective</span>(<span class="dt">effect_size =</span> <span class="fl">.25</span>, <span class="dt">power =</span> <span class="fl">.60</span>, <span class="dt">test_method =</span> <span class="st">&quot;pearson&quot;</span>,</span>
<span id="cb3-4"><a href="#cb3-4"></a>            <span class="dt">display_message =</span> <span class="ot">TRUE</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; Evaluate n = 501</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt; Estimated power is 1</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; </span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; Evaluate n = 251</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; Estimated power is 0.98</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; </span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; Evaluate n = 126</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt; Estimated power is 0.81</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt; </span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt; Evaluate n = 64</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt; Estimated power is 0.53</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; </span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt; Evaluate n = 95</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#&gt; Estimated power is 0.69</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">#&gt; </span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#&gt; Evaluate n = 80</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="co">#&gt; Estimated power is 0.61</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="co">#&gt; </span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#&gt; Evaluate n = 72</span></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="co">#&gt; Estimated power is 0.57</span></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="co">#&gt; </span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="co">#&gt; Evaluate n = 76</span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co">#&gt; Estimated power is 0.59</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="co">#&gt; </span></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co">#&gt;  Design Analysis</span></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="co">#&gt; </span></span>
<span id="cb3-31"><a href="#cb3-31"></a><span class="co">#&gt; Hypothesized effect:  rho = 0.25 </span></span>
<span id="cb3-32"><a href="#cb3-32"></a><span class="co">#&gt; </span></span>
<span id="cb3-33"><a href="#cb3-33"></a><span class="co">#&gt; Study characteristics:</span></span>
<span id="cb3-34"><a href="#cb3-34"></a><span class="co">#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df</span></span>
<span id="cb3-35"><a href="#cb3-35"></a><span class="co">#&gt;    pearson       76          NULL        two_sided     0.05        74</span></span>
<span id="cb3-36"><a href="#cb3-36"></a><span class="co">#&gt; </span></span>
<span id="cb3-37"><a href="#cb3-37"></a><span class="co">#&gt; Inferential risks:</span></span>
<span id="cb3-38"><a href="#cb3-38"></a><span class="co">#&gt;    power   typeM   typeS</span></span>
<span id="cb3-39"><a href="#cb3-39"></a><span class="co">#&gt;    0.593   1.277   0    </span></span>
<span id="cb3-40"><a href="#cb3-40"></a><span class="co">#&gt; </span></span>
<span id="cb3-41"><a href="#cb3-41"></a><span class="co">#&gt; Critical value(s): rho  =  ± 0.226</span></span></code></pre></div>
<p>The default option <code>display_message = TRUE</code> prints the different steps to find the required sample size and the progress bar. Note that, however, the progress bar is available only when <code>effect_size</code> is defined as a function. In the output, we have the summary information about the hypothesized population effect, the study characteristics, and the inferential risks. To obtain a power of around 60% the required sample size is <span class="math inline">\(n = 76\)</span>, the associated Type M error is almost 1.30 and the Type S error is approximately 0. Finally, the critical values (i.e., the minimum absolute effect size value that would result significant) are <span class="math inline">\(\rho = \pm.226\)</span>. Note that correlation tests were conducted considering <code>&quot;two_sided&quot;</code> alternative hypothesis and a significance level of .05 (the default settings).</p>
</div>
</div>
<div id="prospective-design-analysis-for-means-comparison" class="section level2">
<h2>Prospective Design Analysis for Means Comparison</h2>
<p>To conduct a retrospective design analysis considering means comparisons, we need to specify the appropriate <em>t</em>-test (i.e., One-sample, Paired, Two-sample, or Welch’s <em>t</em>-test) using the argument <code>test_method</code>. Arguments specifications for the different <em>t</em>-tests are presented in the following Table.</p>
<table>
<thead>
<tr class="header">
<th align="right">Test</th>
<th align="center"><code>test_method</code></th>
<th align="center">Other required arguments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">One-sample <em>t</em>-test</td>
<td align="center"><code>one_sample</code></td>
<td align="center"><code>ratio_n = NULL</code></td>
</tr>
<tr class="even">
<td align="right">Paired <em>t</em>-test</td>
<td align="center"><code>paired</code></td>
<td align="center"><code>ratio_n = 1</code></td>
</tr>
<tr class="odd">
<td align="right">Two-sample <em>t</em>-test</td>
<td align="center"><code>two_sample</code></td>
<td align="center"><code>ratio_n</code></td>
</tr>
<tr class="even">
<td align="right">Welch’s <em>t</em>-test</td>
<td align="center"><code>welch</code></td>
<td align="center"><code>ratio_n</code> and <code>ratio_sd</code></td>
</tr>
</tbody>
</table>
<div id="example-2-paired-t-test" class="section level3">
<h3>Example 2: Paired <em>t</em>-test</h3>
<p>Imagine that we are planning a study where the same group is measured twice (e.g., pre- and post-test). Knowing from the literature that we expect an effect size of <span class="math inline">\(d = .35\)</span>, which is the required sample size to obtain a power of 80%? We can use the function <code>prospective()</code> specifying the corresponding arguments. We use the option <code>test_method = one_sample</code> for paired <em>t</em>-test and set <code>ratio_n = 1</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">prospective</span>(<span class="dt">effect_size =</span> <span class="fl">.35</span>, <span class="dt">power =</span> <span class="fl">.8</span>, <span class="dt">test_method =</span> <span class="st">&quot;paired&quot;</span>,</span>
<span id="cb4-2"><a href="#cb4-2"></a>            <span class="dt">ratio_n =</span> <span class="dv">1</span>, <span class="dt">display_message =</span> <span class="ot">FALSE</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; </span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;  Design Analysis</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt; </span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; Hypothesized effect:  cohen_d = 0.35 </span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt; </span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt; Study characteristics:</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt;    paired        66          66          two_sided     0.05        65</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt; </span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; Inferential risks:</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt;    power   typeM   typeS</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt;    0.798   1.124   0    </span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt; </span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt; Critical value(s): cohen_d  =  ± 0.246</span></span></code></pre></div>
<p>To obtain a power of 80%, the required sample size is <span class="math inline">\(n=66\)</span>, the associated Type M error is around 1.10 and the Type S error is approximately 0. Finally, the critical values (i.e., the minimum absolute effect size value that would result significant) are <span class="math inline">\(d = \pm 0.246\)</span>.</p>
</div>
<div id="example-3-two-sample-t-test" class="section level3">
<h3>Example 3: Two-sample <em>t</em>-test</h3>
<p>Imagine now the case where two groups (e.g., treatment and control group) will be compared. However, we know in advance that the sample size in the two groups will be different (e.g., the number of participants in the treatment group could be limited due to strict selecting criteria). We can define the ratio between the sample size in the first group and in the second group using the <code>ratio_n</code> argument. Again, we hypothesize an effect size of <span class="math inline">\(d = .35\)</span>, but this time we specify a one-sided alternative hypothesis and a significance level of .10. We can do that using respectively the arguments <code>alternative</code> and <code>sig_level</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">prospective</span>(<span class="dt">effect_size =</span> <span class="fl">.35</span>, <span class="dt">power =</span> <span class="fl">.80</span>, <span class="dt">ratio_n =</span> <span class="fl">.5</span>, </span>
<span id="cb5-2"><a href="#cb5-2"></a>            <span class="dt">test_method =</span> <span class="st">&quot;two_sample&quot;</span>, <span class="dt">alternative =</span> <span class="st">&quot;great&quot;</span>, <span class="dt">sig_level =</span> <span class="fl">.10</span>, </span>
<span id="cb5-3"><a href="#cb5-3"></a>            <span class="dt">display_message =</span> <span class="ot">FALSE</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;  Design Analysis</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt; Hypothesized effect:  cohen_d = 0.35 </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt; </span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt; Study characteristics:</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df </span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;    two_sample    55          110         greater       0.1         163</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; </span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt; Inferential risks:</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;    power   typeM   typeS</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;    0.802   1.167   0    </span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt; </span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt; Critical value(s): cohen_d  =  0.213</span></span></code></pre></div>
<p>The option <code>test_method = &quot;two_sample&quot;</code> is used to consider a two-sample <em>t</em>-test. To obtain a power of 80%, we would need at least 55 participants in the first group and 110 participants in the second group. The associated Type M error is almost 1.20 and the Type S error is approximately 0. Finally, the critical value is <span class="math inline">\(d = .213\)</span>.</p>
</div>
<div id="example-4-welchs-t-test" class="section level3">
<h3>Example 4: Welch’s <em>t</em>-test</h3>
<p>Consider again the previous example, but this time we do not assume homogeneity of variance between the two groups. We suppose, instead, that the ratio between the standard deviation of the first group and of the second group is 1.5. In this case the appropriate test is the Welch’s <em>t</em>-test. We set the option <code>test_method = &quot;welch&quot;</code> and specify the argument <code>ratio_sd</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">prospective</span>(<span class="dt">effect_size =</span> <span class="fl">.35</span>, <span class="dt">power =</span> <span class="fl">.80</span>, <span class="dt">ratio_n =</span> <span class="fl">.5</span>, <span class="dt">test_method =</span> <span class="st">&quot;welch&quot;</span>,</span>
<span id="cb6-2"><a href="#cb6-2"></a>            <span class="dt">ratio_sd =</span> <span class="fl">1.5</span>, <span class="dt">alternative =</span> <span class="st">&quot;great&quot;</span>, <span class="dt">sig_level =</span> <span class="fl">.10</span>, </span>
<span id="cb6-3"><a href="#cb6-3"></a>            <span class="dt">display_message =</span> <span class="ot">FALSE</span>)</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt; </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt;  Design Analysis</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt; </span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt; Hypothesized effect:  cohen_d = 0.35 </span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt; </span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt; Study characteristics:</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df    </span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;    welch         63          126         greater       0.1         90.403</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt; </span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt; Inferential risks:</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt;    power   typeM   typeS</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt;    0.799   1.17    0    </span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; </span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt; Critical value(s): cohen_d  =  0.212</span></span></code></pre></div>
<p>Now, to obtain a power of 80%, we would need at least 63 participants in the first group and 126 participants in the second group. The associated Type M error is almost 1.20 and the Type S error is approximately 0. Finally, the critical value is <span class="math inline">\(d = .212\)</span>. Results are really close to the previous ones.</p>
</div>
</div>
<div id="population-effect-size-distribution" class="section level2">
<h2>Population effect size distribution</h2>
<p>Defining the hypothetical population effect size as a single value could be limiting. Instead, researchers may prefer to use a probability distribution representing their uncertainty regarding the hypothetical population effect. Note that this could be interpreted as a prior distribution of the population effect in a Bayesian framework.</p>
<p>To define the hypothetical population effect size (<code>effect_size</code>) according to a probability distribution, it is necessary to specify a function that allows sampling values from a given distribution. The function has to be defined as <code>function(n) my_function(n, ...)</code>, with only one single argument <code>n</code> representing the number of samples (e.g., <code>function(n) rnorm(n, mean = 0, sd = 1)</code>). See <a href="retrospective.html"><code>vignette(&quot;retrospective&quot;)</code></a> for further details.</p>
<div id="example-5-effect-size-distribution" class="section level3">
<h3>Example 5: Effect size distribution</h3>
<p>Consider the same scenario as in the correlation example (Example 1). This time we define the hypothesized effect size according to a normal distribution with mean .30 and standard deviation .10. Moreover, to avoid unreasonable values we truncate the distribution between .15 and .45.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">prospective</span>(<span class="dt">effect_size =</span> <span class="cf">function</span>(n) <span class="kw">rnorm</span>(n, <span class="fl">.3</span>, <span class="fl">.1</span>), <span class="dt">power =</span> <span class="fl">.60</span>, </span>
<span id="cb7-2"><a href="#cb7-2"></a>            <span class="dt">test_method =</span> <span class="st">&quot;pearson&quot;</span>, <span class="dt">tl =</span> <span class="fl">.15</span>, <span class="dt">tu =</span> <span class="fl">.45</span>, <span class="dt">B_effect =</span> <span class="dv">500</span>, </span>
<span id="cb7-3"><a href="#cb7-3"></a>            <span class="dt">B =</span> <span class="dv">500</span>, <span class="dt">display_message =</span> <span class="ot">FALSE</span>)</span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">#&gt; Truncation could require long computational time</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt; </span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">#&gt;  Design Analysis</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">#&gt; </span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt; Hypothesized effect:  rho ~ rnorm(n, 0.3, 0.1) [tl =  0.15 ; tu = 0.45 ]</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt;    n_effect   Min.   1st Qu.   Median   Mean   3rd Qu.   Max. </span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;    500        0.15   0.241     0.302    0.3    0.356     0.448</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt; </span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt; Study characteristics:</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;    test_method   sample_n1   sample_n2   alternative   sig_level   df</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt;    pearson       52          NULL        two_sided     0.05        50</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt; </span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt; Inferential risks:</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt;         Min.    1st Qu.   Median   Mean       3rd Qu.   Max. </span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt; power   0.176   0.412     0.6060   0.582236   0.75      0.936</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; typeM   1.019   1.143     1.2675   1.361914   1.50      2.338</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">#&gt; typeS   0.000   0.000     0.0000   0.000464   0.00      0.033</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#&gt; </span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#&gt; Critical value(s): rho  =  ± 0.273</span></span></code></pre></div>
<p>Note that we adjusted <code>B_effect</code> and <code>B</code> to find a good trade-off between computational times and results accuracy. Differently from previous outputs, we have now a summary for the sampled effects distribution and for the inferential risks.</p>
</div>
</div>
<div id="graphical-representation" class="section level2">
<h2>Graphical representation</h2>
<p>Currently there are no personalized plot functions in {PRDA}. However, it is easy to access all the results and use them to create the plots according to your needs.</p>
<p>The function <code>prospective()</code> returns a list with class <code>&quot;design_analysis&quot;</code> that contains:</p>
<ul>
<li><code>design_analysis</code> - a character string indicating the type of design analysis (prospective or retrospective).</li>
<li><code>call_arguments</code> - a list with all the arguments passed to the function.</li>
<li><code>effect_info</code> - a list with all the information regarding the considered hypothetical population effect size. In particular, in <code>effect_samples</code> we find the vector with the sampled effects (or unique value in the case of a single value).</li>
<li><code>test_info</code> - a list with all the information regarding the test performed.</li>
<li><code>prospective_res</code> - a data frame with the results of the design analysis (i.e., <code>power</code>, <code>typeM</code>, and <code>typeS</code>).</li>
</ul>
<p>Output complete description is provided in the function help page <code>?prospective</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>da_fit &lt;-<span class="st"> </span><span class="kw">prospective</span>(<span class="dt">effect_size =</span> <span class="cf">function</span>(n) <span class="kw">rnorm</span>(n, <span class="fl">.3</span>, <span class="fl">.1</span>), <span class="dt">power =</span> <span class="fl">.60</span>,</span>
<span id="cb8-2"><a href="#cb8-2"></a>                      <span class="dt">test_method =</span> <span class="st">&quot;pearson&quot;</span>, <span class="dt">tl =</span> <span class="fl">.15</span>, <span class="dt">tu =</span> <span class="fl">.45</span>, </span>
<span id="cb8-3"><a href="#cb8-3"></a>                      <span class="dt">B_effect =</span> <span class="dv">500</span>, <span class="dt">B =</span> <span class="dv">500</span>, <span class="dt">display_message =</span> <span class="ot">FALSE</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt; Truncation could require long computational time</span></span>
<span id="cb8-5"><a href="#cb8-5"></a></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="kw">str</span>(da_fit, <span class="dt">max.level =</span> <span class="dv">1</span>)</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; List of 5</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;  $ design_analysis: chr &quot;prospective&quot;</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt;  $ call_arguments :List of 16</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt;  $ effect_info    :List of 6</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt;  $ test_info      :List of 7</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt;  $ prospective_res:&#39;data.frame&#39;: 500 obs. of  3 variables:</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt;  - attr(*, &quot;class&quot;)= chr [1:2] &quot;design_analysis&quot; &quot;list&quot;</span></span></code></pre></div>
<p>Similarly to the examples provided in <a href="retrospective.html"><code>vignette(&quot;retrospective&quot;)</code></a>, results can be used to create the plots according to your needs. See <a href="retrospective.html"><code>vignette(&quot;retrospective&quot;)</code></a> for further details.</p>
<div id="references" class="section level3 unnumbered">
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-altoeEnhancingStatisticalInference2020">
<p>Altoè, Gianmarco, Giulia Bertoldo, Claudio Zandonella Callegher, Enrico Toffalini, Antonio Calcagnì, Livio Finos, and Massimiliano Pastore. 2020. “Enhancing Statistical Inference in Psychological Research via Prospective and Retrospective Design Analysis.” <em>Frontiers in Psychology</em> 10. <a href="https://doi.org/10.3389/fpsyg.2019.02893">https://doi.org/10.3389/fpsyg.2019.02893</a>.</p>
</div>
<div id="ref-bertoldoDesigningStudiesEvaluating2020">
<p>Bertoldo, Giulia, Claudio Zandonella Callegher, and Gianmarco Altoè. 2020. “Designing Studies and Evaluating Research Results: Type M and Type S Errors for Pearson Correlation Coefficient.” Preprint. PsyArXiv. <a href="https://doi.org/10.31234/osf.io/q9f86">https://doi.org/10.31234/osf.io/q9f86</a>.</p>
</div>
<div id="ref-gelmanPowerCalculationsAssessing2014">
<p>Gelman, Andrew, and John Carlin. 2014. “Beyond Power Calculations: Assessing Type S (Sign) and Type M (Magnitude) Errors.” <em>Perspectives on Psychological Science</em> 9 (6): 641–51. <a href="https://doi.org/10.1177/1745691614551642">https://doi.org/10.1177/1745691614551642</a>.</p>
</div>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
