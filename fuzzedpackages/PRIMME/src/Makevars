PKG_CXXFLAGS = -I../inst/include  -DPRIMME_INT_SIZE=0
LTO =
LTO_FC =
LTO_LD =

# Linker will discard primmeext if R provides a full LAPACK
PKG_LIBS = -Lprimme -lprimme $(LAPACK_LIBS) -lprimmeext $(BLAS_LIBS) $(FLIBS)

$(SHLIB): primme/libprimme.a primme/libprimmeext.a

primme/libprimme.a:
	@(cd primme && $(MAKE) -f make_primme libprimme.a \
	  CC="$(CXX)" CFLAGS="$(R_XTRA_CPPFLAGS) $(CXXFLAGS) $(CPICFLAGS) -DF77UNDERSCORE -DUSE_XHEEV -DUSE_ZGESV -DUSE_XHEGV -DPRIMME_INT_SIZE=0 -DPRIMME_WITHOUT_FLOAT -DPRIMME_BLAS_RCOMPLEX" AR="$(AR)" \
	  RANLIB="$(RANLIB)")

primme/libprimmeext.a:
	@(cd primme && $(MAKE) -f make_primme libprimmeext.a \
	  CC="$(CC)" CFLAGS="$(CFLAGS) $(CPICFLAGS)" AR="$(AR)" \
	  RANLIB="$(RANLIB)")
